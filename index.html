<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LoveTime Galaxia | A Cosmic Love Story</title>
    <link rel="icon" type="image/x-icon" href="https://static.photos/blue/200x200/42">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Poppins:wght@300;500;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
            background: #000;
        }
        
        .font-serif {
            font-family: 'Playfair Display', serif;
        }
        
        /* LEGENDARY ANIMATED NEBULA BACKGROUND */
        .legendary-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at bottom, #1B2735 0%, #090A0F 100%);
            z-index: 0;
            overflow: hidden;
        }
        
        /* Multiple Layered Gradients */
        .gradient-layer-1 {
            position: absolute;
            width: 200%;
            height: 200%;
            top: -50%;
            left: -50%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(255, 0, 128, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 30%, rgba(0, 242, 254, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 50% 80%, rgba(138, 43, 226, 0.15) 0%, transparent 50%);
            animation: drift 25s ease-in-out infinite;
        }
        
        .gradient-layer-2 {
            position: absolute;
            width: 200%;
            height: 200%;
            top: -50%;
            left: -50%;
            background: 
                radial-gradient(circle at 70% 60%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 30% 40%, rgba(147, 51, 234, 0.12) 0%, transparent 50%),
                radial-gradient(circle at 60% 20%, rgba(59, 130, 246, 0.1) 0%, transparent 50%);
            animation: drift 30s ease-in-out infinite reverse;
        }
        
        @keyframes drift {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(-5%, 5%) rotate(120deg); }
            66% { transform: translate(5%, -5%) rotate(240deg); }
        }
        
        /* Cosmic Particles */
        .cosmic-particle {
            position: absolute;
            border-radius: 50%;
            filter: blur(0.5px);
            animation: floatCosmic linear infinite;
        }
        
        @keyframes floatCosmic {
            0% {
                transform: translateY(100vh) translateX(0) scale(0);
                opacity: 0;
            }
            10% {
                opacity: 0.8;
            }
            50% {
                opacity: 1;
            }
            90% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(-20vh) translateX(var(--drift)) scale(1.5);
                opacity: 0;
            }
        }
        
        /* Glowing Orbs */
        .glow-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(40px);
            animation: orbFloat 20s ease-in-out infinite;
            opacity: 0.4;
        }
        
        @keyframes orbFloat {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(50px, -80px) scale(1.2); }
            50% { transform: translate(-30px, -120px) scale(0.9); }
            75% { transform: translate(70px, -60px) scale(1.1); }
        }
        
        /* Star Field with Depth */
        .star-field {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }
        
        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 6px rgba(255, 255, 255, 0.8);
            animation: twinkle var(--duration) infinite ease-in-out;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.3); }
        }
        
        /* Shooting Stars - More Frequent */
        .shooting-star {
            position: absolute;
            height: 2px;
            background: linear-gradient(90deg, #fff, transparent);
            border-radius: 50%;
            box-shadow: 0 0 8px 2px rgba(255, 255, 255, 0.9);
            animation: shoot 2s linear;
        }
        
        @keyframes shoot {
            0% {
                transform: translateX(0) translateY(0) rotate(-45deg);
                opacity: 1;
                width: 0;
            }
            50% {
                width: 100px;
                opacity: 1;
            }
            100% {
                transform: translateX(-400px) translateY(400px) rotate(-45deg);
                opacity: 0;
                width: 100px;
            }
        }
        
        /* Constellation Lines */
        .constellation-line {
            position: absolute;
            background: linear-gradient(90deg, transparent, rgba(94, 234, 212, 0.3), transparent);
            height: 1px;
            transform-origin: left center;
            animation: drawLine 3s ease-in-out infinite;
        }
        
        @keyframes drawLine {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }
        
        /* Magical Portal Glow */
        .portal-glow {
            position: relative;
            box-shadow: 
                0 0 80px rgba(94, 234, 212, 0.6),
                0 0 120px rgba(139, 92, 246, 0.4),
                0 0 160px rgba(236, 72, 153, 0.3),
                inset 0 0 80px rgba(94, 234, 212, 0.2);
            animation: portalPulse 4s infinite ease-in-out;
        }
        
        .portal-glow::before {
            content: '';
            position: absolute;
            inset: -5px;
            border-radius: 50%;
            background: conic-gradient(
                from 0deg,
                transparent 0deg 90deg,
                rgba(94, 234, 212, 0.5) 90deg 180deg,
                transparent 180deg 270deg,
                rgba(236, 72, 153, 0.5) 270deg 360deg
            );
            animation: rotate 4s linear infinite;
            filter: blur(10px);
            z-index: -1;
        }
        
        @keyframes portalPulse {
            0%, 100% { 
                box-shadow: 
                    0 0 80px rgba(94, 234, 212, 0.6),
                    0 0 120px rgba(139, 92, 246, 0.4),
                    0 0 160px rgba(236, 72, 153, 0.3),
                    inset 0 0 80px rgba(94, 234, 212, 0.2);
            }
            50% { 
                box-shadow: 
                    0 0 120px rgba(94, 234, 212, 0.8),
                    0 0 160px rgba(139, 92, 246, 0.6),
                    0 0 200px rgba(236, 72, 153, 0.5),
                    inset 0 0 100px rgba(94, 234, 212, 0.4);
            }
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* Timeline Dots Enhanced */
        .timeline-dot {
            position: absolute;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(94,234,212,1) 0%, rgba(236,72,153,1) 100%);
            box-shadow: 
                0 0 20px rgba(94, 234, 212, 0.8),
                0 0 40px rgba(236, 72, 153, 0.4);
            cursor: pointer;
            transition: all 0.4s ease;
            z-index: 10;
        }
        
        .timeline-dot::before {
            content: '';
            position: absolute;
            inset: -3px;
            border-radius: 50%;
            background: linear-gradient(45deg, transparent, rgba(94, 234, 212, 0.5));
            animation: rotate 3s linear infinite;
        }
        
        .timeline-dot:hover {
            transform: scale(1.6);
            box-shadow: 
                0 0 30px rgba(94, 234, 212, 1),
                0 0 60px rgba(236, 72, 153, 0.6);
        }
        
        .timeline-dot.active {
            transform: scale(2);
            box-shadow: 
                0 0 40px rgba(94, 234, 212, 1),
                0 0 80px rgba(236, 72, 153, 0.8);
        }
        
        /* Message Bubbles with Glow */
        .message-bubble {
            backdrop-filter: blur(20px) saturate(180%);
            background: rgba(10, 0, 30, 0.5);
            border: 1px solid rgba(94, 234, 212, 0.3);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        
        .message-bubble::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(94, 234, 212, 0.1), transparent, rgba(236, 72, 153, 0.1));
            opacity: 0;
            transition: opacity 0.4s ease;
        }
        
        .message-bubble:hover {
            transform: translateY(-5px);
            box-shadow: 
                0 15px 40px rgba(94, 234, 212, 0.3),
                0 5px 20px rgba(236, 72, 153, 0.2);
            border-color: rgba(94, 234, 212, 0.6);
        }
        
        .message-bubble:hover::before {
            opacity: 1;
        }
        
        /* Era Display Effects */
        .era-golden { 
            background: linear-gradient(135deg, rgba(255,215,0,0.15) 0%, rgba(255,140,0,0.25) 100%);
            box-shadow: 0 0 60px rgba(255,215,0,0.3);
            border: 1px solid rgba(255,215,0,0.4);
        }
        
        .era-night { 
            background: linear-gradient(135deg, rgba(59,130,246,0.15) 0%, rgba(139,92,246,0.25) 100%);
            box-shadow: 0 0 60px rgba(139,92,246,0.3);
            border: 1px solid rgba(139,92,246,0.4);
        }
        
        .era-starburst { 
            background: linear-gradient(135deg, rgba(236,72,153,0.15) 0%, rgba(219,39,119,0.25) 100%);
            box-shadow: 0 0 60px rgba(236,72,153,0.3);
            border: 1px solid rgba(236,72,153,0.4);
        }
        
        /* Glass Morphism Premium */
        .glass {
            backdrop-filter: blur(30px) saturate(200%);
            background: rgba(5, 0, 20, 0.6);
            border: 1px solid rgba(94, 234, 212, 0.2);
            box-shadow: 
                0 8px 32px 0 rgba(94, 234, 212, 0.1),
                inset 0 1px 0 0 rgba(255, 255, 255, 0.1);
        }
        
        .hidden {
            display: none !important;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .text-4xl { font-size: 2rem; }
            .text-6xl { font-size: 3rem; }
            .text-xl { font-size: 1.125rem; }
            .max-w-4xl { max-width: 90%; }
            .w-64 { width: 12rem; }
            .h-64 { height: 12rem; }
        }
    </style>
</head>
<body class="bg-black text-white">
    <!-- LEGENDARY BACKGROUND -->
    <div class="legendary-bg">
        <div class="gradient-layer-1"></div>
        <div class="gradient-layer-2"></div>
        <div id="glow-orbs"></div>
        <div class="star-field" id="star-field"></div>
        <div id="cosmic-particles"></div>
        <div id="shooting-stars"></div>
        <div id="constellation-lines"></div>
    </div>

    <!-- Main Container -->
    <div id="app" class="relative z-10">
        <!-- Portal Screen -->
        <div id="portal-screen" class="min-h-screen flex flex-col items-center justify-center p-4">
            <div class="max-w-4xl mx-auto text-center px-6 py-12 glass rounded-xl">
                <h1 class="text-4xl md:text-6xl font-serif mb-6 bg-gradient-to-r from-cyan-300 via-purple-300 to-pink-300 bg-clip-text text-transparent">LoveTime Galaxia</h1>
                <p class="text-xl md:text-2xl mb-8 font-light text-cyan-100">A cosmic journey through our love story</p>
                
                <div class="my-12 flex justify-center">
                    <div id="portal-key" class="portal-glow w-64 h-64 rounded-full bg-gradient-to-br from-cyan-500 via-purple-500 to-pink-500 flex items-center justify-center cursor-pointer transform transition-all hover:scale-105">
                        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="animate-bounce">
                            <path d="m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4"></path>
                            <path d="m21 2-9.6 9.6"></path>
                            <circle cx="7.5" cy="15.5" r="5.5"></circle>
                        </svg>
                    </div>
                </div>

                <p class="text-lg md:text-xl text-gray-300 mb-2">"Every moment we shared became a star in our universe"</p>
                <p class="text-sm text-gray-400">Click the portal key to begin</p>
            </div>
        </div>

        <!-- Time Machine Screen -->
        <div id="timemachine-screen" class="hidden min-h-screen p-4 pt-20">
            <nav class="fixed top-0 left-0 w-full z-50 p-4 glass border-b border-cyan-500/20">
                <div class="container mx-auto flex justify-between items-center">
                    <button id="back-to-portal" class="text-cyan-300 hover:text-cyan-100 transition-colors flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
                            <polyline points="15 18 9 12 15 6"></polyline>
                        </svg>
                        Back to Portal
                    </button>
                    <span class="text-cyan-100 font-light hidden md:block">"Our timeless love story"</span>
                </div>
            </nav>

            <div class="flex flex-col items-center justify-center">
                <div class="max-w-4xl w-full text-center mb-12">
                    <h2 class="text-3xl md:text-5xl font-serif mb-4 bg-gradient-to-r from-cyan-300 via-purple-300 to-pink-300 bg-clip-text text-transparent">Time Machine</h2>
                    <p class="text-lg text-cyan-100 font-light max-w-2xl mx-auto">Click on any moment to relive that chapter of our story</p>
                </div>

                <div class="relative w-full max-w-xl aspect-square my-8">
                    <div id="time-machine-dial" class="relative w-full h-full rounded-full border-2 border-cyan-500/30 shadow-lg shadow-cyan-500/20">
                        <!-- Timeline dots will be added dynamically -->
                    </div>
                </div>

                <div id="era-display" class="w-full max-w-2xl p-8 rounded-xl glass transition-all duration-1000">
                    <h3 class="text-2xl md:text-3xl font-serif mb-4 text-cyan-300" id="era-title">Select a moment in time</h3>
                    <p class="text-gray-300" id="era-description">Click on any glowing dot to relive that chapter of our story</p>
                    <div class="mt-6 flex justify-center">
                        <button id="start-journey-btn" class="px-6 py-3 bg-gradient-to-r from-cyan-600 to-purple-600 hover:from-cyan-700 hover:to-purple-700 rounded-full flex items-center transition-all shadow-lg shadow-cyan-500/30">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
                                <polygon points="5 3 19 12 5 21 5 3"></polygon>
                            </svg>
                            Start Journey
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Universe Screen -->
        <div id="universe-screen" class="hidden min-h-screen">
            <nav class="fixed top-0 left-0 w-full z-50 p-4 glass border-b border-cyan-500/20 flex justify-between">
                <button id="back-to-timemachine" class="text-cyan-300 hover:text-cyan-100 transition-colors flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                    Back to Time Machine
                </button>
                <div class="text-cyan-100 font-light hidden md:block">
                    <span id="current-date">Summer 2023</span>
                </div>
            </nav>

            <div class="container mx-auto px-4 pt-24 pb-16 relative z-10">
                <div class="text-center mb-12">
                    <h1 class="text-4xl md:text-6xl font-serif mb-4 bg-gradient-to-r from-cyan-300 via-purple-300 to-pink-300 bg-clip-text text-transparent" id="universe-title">Our Summer Adventures</h1>
                    <p class="text-xl text-cyan-100 max-w-2xl mx-auto">Messages from this chapter of our story</p>
                </div>

                <div id="messages-container" class="max-w-3xl mx-auto space-y-8">
                    <!-- Messages will be populated dynamically -->
                </div>

                <div class="flex justify-between mt-16 max-w-3xl mx-auto">
                    <button id="prev-chapter" class="px-6 py-3 bg-gradient-to-r from-cyan-600/50 to-purple-600/50 hover:from-cyan-700/50 hover:to-purple-700/50 rounded-full flex items-center transition-all">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="mr-2">
                            <line x1="19" y1="12" x2="5" y2="12"></line>
                            <polyline points="12 19 5 12 12 5"></polyline>
                        </svg>
                        Previous
                    </button>
                    <button id="next-chapter" class="px-6 py-3 bg-gradient-to-r from-cyan-600 to-purple-600 hover:from-cyan-700 hover:to-purple-700 rounded-full flex items-center transition-all shadow-lg shadow-cyan-500/30">
                        Next
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-2">
                            <line x1="5" y1="12" x2="19" y2="12"></line>
                            <polyline points="12 5 19 12 12 19"></polyline>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Forever Screen -->
        <div id="forever-screen" class="hidden min-h-screen flex flex-col items-center justify-center p-4 text-center">
            <div class="max-w-2xl mx-auto glass p-8 md:p-12 rounded-xl mb-12">
                <h1 class="text-3xl md:text-5xl font-serif mb-8 bg-gradient-to-r from-cyan-300 via-purple-300 to-pink-300 bg-clip-text text-transparent">Dear Love,</h1>
                <div id="final-letter" class="text-lg md:text-xl leading-relaxed text-left space-y-6">
                    <!-- Letter content will be typed out -->
                </div>
            </div>

            <button id="restart-btn" class="px-8 py-4 bg-gradient-to-r from-cyan-500 via-purple-500 to-pink-500 hover:from-cyan-600 hover:via-purple-600 hover:to-pink-600 rounded-full text-xl font-medium flex items-center transition-all transform hover:scale-105 shadow-lg shadow-purple-500/40">
                Begin Our Next Chapter
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="ml-3">
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                    <polyline points="12 5 19 12 12 19"></polyline>
                </svg>
            </button>
        </div>
    </div>

    <script>
        // App State
        const appState = {
            currentScreen: 'portal',
            currentTimeline: 0
        };

        // Timeline Data
        const timelineData = [
            { 
                id: 1, 
                title: "First Connection", 
                date: "2023-01-15", 
                era: "golden", 
                description: "The day our stars first aligned",
                messages: [
                    { sender: "You", time: "Jan 15, 2023 · 2:30 PM", text: "Hey! I noticed your profile and thought you seemed really interesting. How's your day going?" },
                    { sender: "Partner", time: "Jan 15, 2023 · 3:15 PM", text: "Hi! That's so sweet of you to reach out. My day just got a lot better 😊" }
                ]
            },
            { 
                id: 2, 
                title: "First Date", 
                date: "2023-02-20", 
                era: "golden", 
                description: "Moonlight and laughter under city lights",
                messages: [
                    { sender: "You", time: "Feb 20, 2023 · 9:45 PM", text: "Tonight was amazing. I can't remember the last time I laughed so hard!" },
                    { sender: "Partner", time: "Feb 20, 2023 · 10:02 PM", text: "Me too! I never wanted it to end. When can I see you again?" }
                ]
            },
            { 
                id: 3, 
                title: "First I Love You", 
                date: "2023-04-10", 
                era: "starburst", 
                description: "Three words that changed everything",
                messages: [
                    { sender: "You", time: "Apr 10, 2023 · 11:47 PM", text: "I need to tell you something... I love you. I've felt it for a while now." },
                    { sender: "Partner", time: "Apr 10, 2023 · 11:49 PM", text: "I love you too! I've been wanting to say it but was so nervous ❤️" }
                ]
            },
            { 
                id: 4, 
                title: "Summer Adventures", 
                date: "2023-06-15", 
                era: "golden", 
                description: "Endless days and warm memories",
                messages: [
                    { sender: "You", time: "Jun 20, 2023 · 3:42 PM", text: "Remember our beach picnic yesterday? I can't stop thinking about how you looked with the sunset behind you." },
                    { sender: "Partner", time: "Jul 4, 2023 · 11:15 AM", text: "I love you more than yesterday but less than tomorrow ❤️" },
                    { sender: "You", time: "Jul 15, 2023 · 9:27 PM", text: "Today was perfect. Hiking, finding that hidden waterfall, and just being with you." }
                ]
            }
        ];

        // Initialize LEGENDARY Background
        function initLegendaryBackground() {
            // Create Glowing Orbs
            const orbsContainer = document.getElementById('glow-orbs');
            const orbColors = [
                'rgba(94, 234, 212, 0.4)',
                'rgba(236, 72, 153, 0.4)',
                'rgba(139, 92, 246, 0.4)',
                'rgba(255, 215, 0, 0.4)'
            ];
            
            for (let i = 0; i < 8; i++) {
                const orb = document.createElement('div');
                orb.className = 'glow-orb';
                orb.style.width = `${Math.random() * 300 + 150}px`;
                orb.style.height = orb.style.width;
                orb.style.left = `${Math.random() * 100}%`;
                orb.style.top = `${Math.random() * 100}%`;
                orb.style.background = orbColors[i % orbColors.length];
                orb.style.animationDelay = `${Math.random() * 10}s`;
                orb.style.animationDuration = `${Math.random() * 10 + 15}s`;
                orbsContainer.appendChild(orb);
            }

            // Create Star Field
            const starField = document.getElementById('star-field');
            for (let i = 0; i < 200; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                const size = Math.random() * 3 + 0.5;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 100}%`;
                star.style.setProperty('--duration', `${Math.random() * 4 + 2}s`);
                star.style.animationDelay = `${Math.random() * 6}s`;
                starField.appendChild(star);
            }

            // Create Cosmic Particles
            const particlesContainer = document.getElementById('cosmic-particles');
            for (let i = 0; i < 40; i++) {
                const particle = document.createElement('div');
                particle.className = 'cosmic-particle';
                const size = Math.random() * 4 + 1;
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${Math.random() * 100}%`;
                particle.style.background = `radial-gradient(circle, rgba(${Math.random() > 0.5 ? '94,234,212' : '236,72,153'}, 0.8), transparent)`;
                particle.style.animationDuration = `${Math.random() * 15 + 10}s`;
                particle.style.animationDelay = `${Math.random() * 5}s`;
                particle.style.setProperty('--drift', `${Math.random() * 200 - 100}px`);
                particlesContainer.appendChild(particle);
            }

            // Create Shooting Stars
            const shootingStarsContainer = document.getElementById('shooting-stars');
            setInterval(() => {
                const star = document.createElement('div');
                star.className = 'shooting-star';
                star.style.left = `${Math.random() * 100}%`;
                star.style.top = `${Math.random() * 50}%`;
                star.style.width = `${Math.random() * 100 + 50}px`;
                shootingStarsContainer.appendChild(star);
                setTimeout(() => star.remove(), 2000);
            }, 2500);

            // Create Constellation Lines
            const constellationContainer = document.getElementById('constellation-lines');
            for (let i = 0; i < 10; i++) {
                const line = document.createElement('div');
                line.className = 'constellation-line';
                line.style.left = `${Math.random() * 100}%`;
                line.style.top = `${Math.random() * 100}%`;
                line.style.width = `${Math.random() * 150 + 50}px`;
                line.style.transform = `rotate(${Math.random() * 360}deg)`;
                line.style.animationDelay = `${Math.random() * 3}s`;
                line.style.animationDuration = `${Math.random() * 5 + 3}s`;
                constellationContainer.appendChild(line);
            }
        }

        // Screen Navigation
        function showScreen(screenName) {
            ['portal-screen', 'timemachine-screen', 'universe-screen', 'forever-screen'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            document.getElementById(`${screenName}-screen`).classList.remove('hidden');
            appState.currentScreen = screenName;
        }

        // Initialize Timeline
        function initTimeline() {
            const timeMachine = document.getElementById('time-machine-dial');
            timeMachine.innerHTML = '';
            
            timelineData.forEach((item, index) => {
                const angle = (index * (360 / timelineData.length)) * (Math.PI / 180);
                const radius = 150;
                const x = radius * Math.cos(angle);
                const y = radius * Math.sin(angle);
                
                const dot = document.createElement('div');
                dot.className = 'timeline-dot';
                dot.dataset.id = item.id;
                dot.style.left = `calc(50% + ${x}px - 9px)`;
                dot.style.top = `calc(50% + ${y}px - 9px)`;
                
                const tooltip = document.createElement('div');
                tooltip.className = 'absolute -top-10 left-1/2 transform -translate-x-1/2 bg-black/90 px-4 py-2 rounded-lg text-sm whitespace-nowrap pointer-events-none opacity-0 transition-opacity border border-cyan-500/30';
                tooltip.textContent = item.title;
                dot.appendChild(tooltip);
                
                dot.addEventListener('mouseenter', () => {
                    tooltip.classList.remove('opacity-0');
                });
                dot.addEventListener('mouseleave', () => {
                    tooltip.classList.add('opacity-0');
                });
                
                dot.addEventListener('click', () => selectTimeline(index));
                
                timeMachine.appendChild(dot);
            });
            
            selectTimeline(0);
        }

        // Select Timeline
        function selectTimeline(index) {
            appState.currentTimeline = index;
            const item = timelineData[index];
            
            document.getElementById('era-title').textContent = item.title;
            document.getElementById('era-description').textContent = item.description;
            
            const display = document.getElementById('era-display');
            display.classList.remove('era-golden', 'era-night', 'era-starburst');
            display.classList.add(`era-${item.era}`);
            
            document.querySelectorAll('.timeline-dot').forEach(dot => {
                dot.classList.remove('active');
            });
            document.querySelector(`.timeline-dot[data-id="${item.id}"]`)?.classList.add('active');
        }

        // Load Universe Messages
        function loadUniverseMessages() {
            const item = timelineData[appState.currentTimeline];
            document.getElementById('universe-title').textContent = item.title;
            document.getElementById('current-date').textContent = new Date(item.date).toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
            
            const container = document.getElementById('messages-container');
            container.innerHTML = '';
            
            item.messages.forEach((msg, index) => {
                const bubble = document.createElement('div');
                bubble.className = 'message-bubble p-6 rounded-xl';
                
                const color = msg.sender === "You" ? "blue" : "pink";
                const gradientClass = msg.sender === "You" ? "from-blue-500 to-cyan-500" : "from-pink-500 to-purple-500";
                
                bubble.innerHTML = `
                    <div class="flex items-start mb-2">
                        <div class="w-10 h-10 rounded-full bg-gradient-to-br ${gradientClass} mr-4 flex-shrink-0 shadow-lg"></div>
                        <div>
                            <h3 class="font-bold text-cyan-200">${msg.sender}</h3>
                            <p class="text-sm text-gray-400">${msg.time}</p>
                        </div>
                    </div>
                    <div class="pl-14">
                        <p class="text-lg text-gray-200">${msg.text}</p>
                    </div>
                `;
                
                container.appendChild(bubble);
                
                setTimeout(() => {
                    gsap.from(bubble, {
                        opacity: 0,
                        y: 30,
                        duration: 0.6,
                        ease: "power2.out"
                    });
                }, index * 250);
            });
        }

        // Type Letter
        function typeLetter() {
            const letterContent = [
                "As I sit here reflecting on our journey together, I realize this is not an ending but a beautiful beginning.",
                "Every moment we've shared—from our first nervous hello to the comfortable silences we now cherish—has been a star in the constellation of our love.",
                "I want you to know that my love for you isn't measured in days or years, but in the infinite ways you've changed my life for the better.",
                "So here's to our next chapter, wherever it may lead. Because with you, every moment is an adventure I want to experience.",
                "Forever yours,",
                "❤️"
            ];
            
            const container = document.getElementById('final-letter');
            container.innerHTML = '';
            
            letterContent.forEach((text, index) => {
                setTimeout(() => {
                    const p = document.createElement('p');
                    p.className = 'mb-4 text-gray-200';
                    p.textContent = text;
                    container.appendChild(p);
                    
                    gsap.from(p, {
                        opacity: 0,
                        y: 20,
                        duration: 0.8,
                        ease: "power2.out"
                    });
                }, index * 1200);
            });
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', () => {
            initLegendaryBackground();
            
            // Portal to Time Machine
            document.getElementById('portal-key').addEventListener('click', () => {
                gsap.to('#portal-screen', {
                    opacity: 0,
                    duration: 1,
                    onComplete: () => {
                        showScreen('timemachine');
                        initTimeline();
                        gsap.from('#timemachine-screen', { opacity: 0, duration: 1 });
                    }
                });
            });
            
            // Back to Portal
            document.getElementById('back-to-portal').addEventListener('click', () => {
                gsap.to('#timemachine-screen', {
                    opacity: 0,
                    duration: 1,
                    onComplete: () => {
                        showScreen('portal');
                        gsap.from('#portal-screen', { opacity: 0, duration: 1 });
                    }
                });
            });
            
            // Start Journey - No page refresh
            document.getElementById('start-journey-btn').addEventListener('click', (e) => {
                e.preventDefault();
                gsap.to('#timemachine-screen', {
                    opacity: 0,
                    duration: 1,
                    onComplete: () => {
                        showScreen('universe');
                        loadUniverseMessages();
                        gsap.from('#universe-screen', { opacity: 0, duration: 1 });
                    }
                });
            });
            
            // Back to Time Machine
            document.getElementById('back-to-timemachine').addEventListener('click', () => {
                gsap.to('#universe-screen', {
                    opacity: 0,
                    duration: 1,
                    onComplete: () => {
                        showScreen('timemachine');
                        gsap.from('#timemachine-screen', { opacity: 0, duration: 1 });
                    }
                });
            });
            
            // Previous Chapter
            document.getElementById('prev-chapter').addEventListener('click', () => {
                if (appState.currentTimeline > 0) {
                    appState.currentTimeline--;
                    gsap.to('#messages-container', {
                        opacity: 0,
                        x: -50,
                        duration: 0.4,
                        onComplete: () => {
                            loadUniverseMessages();
                            gsap.fromTo('#messages-container', 
                                { opacity: 0, x: 50 },
                                { opacity: 1, x: 0, duration: 0.4 }
                            );
                        }
                    });
                }
            });
            
            // Next Chapter
            document.getElementById('next-chapter').addEventListener('click', () => {
                if (appState.currentTimeline < timelineData.length - 1) {
                    appState.currentTimeline++;
                    gsap.to('#messages-container', {
                        opacity: 0,
                        x: 50,
                        duration: 0.4,
                        onComplete: () => {
                            loadUniverseMessages();
                            gsap.fromTo('#messages-container', 
                                { opacity: 0, x: -50 },
                                { opacity: 1, x: 0, duration: 0.4 }
                            );
                        }
                    });
                } else {
                    gsap.to('#universe-screen', {
                        opacity: 0,
                        duration: 1,
                        onComplete: () => {
                            showScreen('forever');
                            typeLetter();
                            gsap.from('#forever-screen', { opacity: 0, duration: 1 });
                        }
                    });
                }
            });
            
            // Restart - PAGE REFRESH
            document.getElementById('restart-btn').addEventListener('click', () => {
                location.reload();
            });
        });
    </script>
</body>
</html>
